/**
 * HTTP test file for testing purchase-related endpoints in the Biz-Tracker API.
 * This file is designed to be used with the REST Client VS Code extension.
 */

### Variables
@baseUrl = {{baseUrl}}
@token = {{token}}

/**
 * Retrieves all purchases
 * GET /purchases endpoint returns a list of all purchases
 */
GET {{baseUrl}}/purchases
Authorization: Bearer {{token}}

/**
 * Retrieves a specific purchase by ID
 * @param {string} purchase_id - The unique identifier for the purchase
 */
GET {{baseUrl}}/purchases/purchase_id_here
Authorization: Bearer {{token}}

/**
 * Creates a new purchase
 * POST /purchases endpoint with purchase data in the request body
 */
POST {{baseUrl}}/purchases
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "date": "2025-04-10",
  "relationshipId": "vendor_id_here",
  "items": [
    {
      "itemId": "item_id_here",
      "quantity": 10,
      "unitPrice": 25.99
    },
    {
      "itemId": "second_item_id_here",
      "quantity": 5,
      "unitPrice": 15.50
    }
  ],
  "total": 334.90,
  "paymentMethod": "credit",
  "notes": "Bulk purchase for April inventory",
  "status": "completed",
  "receiptNumber": "PO-2025-04-10-001"
}

/**
 * Updates an existing purchase
 * @param {string} purchase_id - The unique identifier for the purchase to update
 */
PUT {{baseUrl}}/purchases/purchase_id_here
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "status": "received",
  "notes": "Items received and verified on April 13, 2025",
  "paymentStatus": "paid"
}

/**
 * Deletes a purchase
 * @param {string} purchase_id - The unique identifier for the purchase to delete
 */
DELETE {{baseUrl}}/purchases/purchase_id_here
Authorization: Bearer {{token}}

/**
 * Filters purchases by date range
 * Uses query parameters to filter purchases within a specific date range
 */
GET {{baseUrl}}/purchases?startDate=2025-03-01&endDate=2025-04-13
Authorization: Bearer {{token}}

/**
 * Retrieves purchases by vendor/relationship
 * Filters purchases by the specified relationship ID
 * @param {string} relationship_id - The relationship/vendor ID to filter by
 */
GET {{baseUrl}}/purchases?relationshipId=vendor_id_here
Authorization: Bearer {{token}}